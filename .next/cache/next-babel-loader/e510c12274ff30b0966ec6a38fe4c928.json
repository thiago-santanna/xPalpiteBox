{"ast":null,"code":"import { GoogleSpreadsheet } from 'google-spreadsheet';\nimport credentials from '../../credentials.json';\nconst doc = new GoogleSpreadsheet('1oDFsbvCF2fkkxmjMvC5K2i6Uld6YhA1HI9isZ8ZZLL4');\nexport default (async (req, res) => {\n  try {\n    await doc.useServiceAccountAuth(credentials);\n    await doc.loadInfo();\n    const sheet = doc.sheetsByIndex[1];\n    const data = JSON.parse(req.body);\n    const sheetConfig = doc.sheetsByIndex[2];\n    await sheetConfig.loadCells('A2:B2');\n    const mostraPromocao = sheetConfig.getCell(1, 0);\n    const textoCell = sheetConfig.getCell(1, 1);\n    await sheet.addRow({\n      Nome: data.Nome,\n      Email: data.Email,\n      Whatsapp: data.Whatsapp,\n      Cupom: '1',\n      Promo: 'Desconto 5%'\n    });\n  } catch (error) {\n    console.log(error);\n    res.end('error');\n  }\n});","map":{"version":3,"sources":["/home/thiago/Dev/DevPleno/semana-FSM/palpite-box/pages/api/save.js"],"names":["GoogleSpreadsheet","credentials","doc","req","res","useServiceAccountAuth","loadInfo","sheet","sheetsByIndex","data","JSON","parse","body","sheetConfig","loadCells","mostraPromocao","getCell","textoCell","addRow","Nome","Email","Whatsapp","Cupom","Promo","error","console","log","end"],"mappings":"AAAA,SAASA,iBAAT,QAAkC,oBAAlC;AACA,OAAOC,WAAP,MAAwB,wBAAxB;AAEA,MAAMC,GAAG,GAAG,IAAIF,iBAAJ,CAAsB,8CAAtB,CAAZ;AAEA,gBAAe,OAAMG,GAAN,EAAWC,GAAX,KAAmB;AAC9B,MAAI;AACA,UAAMF,GAAG,CAACG,qBAAJ,CAA0BJ,WAA1B,CAAN;AACA,UAAMC,GAAG,CAACI,QAAJ,EAAN;AACA,UAAMC,KAAK,GAAGL,GAAG,CAACM,aAAJ,CAAkB,CAAlB,CAAd;AACA,UAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWR,GAAG,CAACS,IAAf,CAAb;AAEA,UAAMC,WAAW,GAAGX,GAAG,CAACM,aAAJ,CAAkB,CAAlB,CAApB;AACA,UAAMK,WAAW,CAACC,SAAZ,CAAsB,OAAtB,CAAN;AAEA,UAAMC,cAAc,GAAGF,WAAW,CAACG,OAAZ,CAAoB,CAApB,EAAuB,CAAvB,CAAvB;AACA,UAAMC,SAAS,GAAGJ,WAAW,CAACG,OAAZ,CAAoB,CAApB,EAAuB,CAAvB,CAAlB;AAEA,UAAMT,KAAK,CAACW,MAAN,CAAa;AACfC,MAAAA,IAAI,EAAEV,IAAI,CAACU,IADI;AAEfC,MAAAA,KAAK,EAAEX,IAAI,CAACW,KAFG;AAGfC,MAAAA,QAAQ,EAAEZ,IAAI,CAACY,QAHA;AAIfC,MAAAA,KAAK,EAAE,GAJQ;AAKfC,MAAAA,KAAK,EAAE;AALQ,KAAb,CAAN;AAOH,GAnBD,CAmBE,OAAOC,KAAP,EAAc;AACZC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACApB,IAAAA,GAAG,CAACuB,GAAJ,CAAQ,OAAR;AACH;AACJ,CAxBD","sourcesContent":["import { GoogleSpreadsheet } from 'google-spreadsheet'\nimport credentials from '../../credentials.json'\n\nconst doc = new GoogleSpreadsheet('1oDFsbvCF2fkkxmjMvC5K2i6Uld6YhA1HI9isZ8ZZLL4')\n\nexport default async(req, res) => {\n    try {    \n        await doc.useServiceAccountAuth(credentials)\n        await doc.loadInfo()            \n        const sheet = doc.sheetsByIndex[1]\n        const data = JSON.parse(req.body)\n\n        const sheetConfig = doc.sheetsByIndex[2]\n        await sheetConfig.loadCells('A2:B2')\n    \n        const mostraPromocao = sheetConfig.getCell(1, 0)    \n        const textoCell = sheetConfig.getCell(1, 1)        \n\n        await sheet.addRow({\n            Nome: data.Nome,\n            Email: data.Email,\n            Whatsapp: data.Whatsapp,\n            Cupom: '1',\n            Promo: 'Desconto 5%'\n        })\n    } catch (error) {\n        console.log(error)   \n        res.end('error')\n    }\n}"]},"metadata":{},"sourceType":"module"}